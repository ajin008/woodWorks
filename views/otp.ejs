<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>OTP Verification</title>
    <!-- Bootstrap CSS -->
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.3.0/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <!-- Font Awesome Icons -->
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
      rel="stylesheet"
    />
    <style>
      /* Your custom styles here */
      .background-radial-gradient {
        background-color: #d9d9d9c8;
        /* Increase the height of the container */
        min-height: 100vh; /* Adjust this value as needed */
      }

      .bg-glass {
        background-color: rgba(255, 255, 255, 0.2) !important;
        backdrop-filter: saturate(200%) blur(25px);
      }

      .form-placeholder ::placeholder {
        color: #fff8f8; /* Light grey color for form labels */
      }

      .form-control {
        background-color: #f8f9fa; /* Light grey background for form controls */
        color: #000; /* Black color for form controls */
      }

      .otp-block {
        display: inline-block;
        width: 50px;
        height: 50px;
        margin-right: 5px;
        border: 2px solid #ced4da;
        border-radius: 5px;
        text-align: center;
        line-height: 50px;
        transition: border-color 0.5s ease-in-out; /* Add transition for glowing effect */
      }

      .otp-block.filled {
        border-color: #28a745;
        animation: glow 1s infinite alternate; /* Add glowing effect animation */
      }

      .btn-success {
        padding: 0.75rem 2rem; /* Reduced button padding */
        font-size: 0.9rem; /* Reduced button font size */
        background-color: #03b82e; /* Green color for primary button */
        border-color: #07b830; /* Green color for button border */
      }
      .btn-success:hover {
        background-color: #030503; /* Darker green color on button hover */
        border-color: #000000; /* Darker green color on button border hover */
      }

      @keyframes glow {
        from {
          border-color: #0ace38;
          box-shadow: 0 0 10px #28a745, 0 0 20px #28a745, 0 0 30px #28a745;
        }
        to {
          border-color: #28a745;
          box-shadow: 0 0 20px #28a745, 0 0 30px #28a745, 0 0 40px #28a745;
        }
      }

      /* Timer styles */
      .timer-container {
        margin-bottom: 20px;
        font-size: 18px;
        color: #908889;
      }
      /* navbar style start */
      .navbar-custom {
        background-color: #d9d9d9c8;
      }
      .navbar-brand {
        color: #4b4b4b;
      }
      .nav-link {
        color: #4b4b4b;
      }
      /* navbar style end */
    </style>
  </head>
  <body>
    <!-- Start Header/Navigation -->
    <nav
      class="custom-navbar navbar navbar-expand-md navbar-dark navbar-custom"
      aria-label="Furni navigation bar"
    >
      <div class="container">
        <a class="navbar-brand" href="index.html">WoodWorks<span>.</span></a>

        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarsFurni"
          aria-controls="navbarsFurni"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarsFurni">
          <ul class="custom-navbar-nav navbar-nav ms-auto mb-2 mb-md-0">
            <li class="nav-item active">
              <a class="nav-link" href="/landingPage">Home</a>
            </li>
            <li><a class="nav-link" href="about">About us</a></li>
          </ul>
        </div>
      </div>
    </nav>
    <!-- End Header/Navigation -->

    <!-- Section: OTP Verification Block -->
    <section class="background-radial-gradient overflow-hidden">
      <div class="container px-4 py-5 px-md-5 text-center text-lg-start my-5">
        <div class="row gx-lg-5 align-items-center mb-5">
          <div
            class="col-lg-6 mb-5 mb-lg-0"
            style="z-index: 10; position: relative"
          >
            <img
              src="./img/pngwing.com (7).png"
              style="max-width: 90%; height: auto"
            />
          </div>

          <div class="col-lg-6 mb-5 mb-lg-0 position-relative">
            <div
              id="radius-shape-1"
              class="position-absolute rounded-circle shadow-5-strong"
            ></div>
            <div
              id="radius-shape-2"
              class="position-absolute shadow-5-strong"
            ></div>

            <div class="card bg-glass">
              <div class="card-body px-4 py-5 px-md-5">
                <h2 class="text-center mb-4">Enter the Confirmation Code</h2>

                <!-- OTP Verification Form -->
                <form id="otpForm" action="/otp" method="post">
                  <div class="form-outline mb-4 d-flex justify-content-center">
                    <!-- OTP Blocks -->
                    <input
                      type="text"
                      class="form-control otp-block"
                      id="otpBlock1"
                      name="otp1"
                      maxlength="1"
                      required
                    />
                    <input
                      type="text"
                      class="form-control otp-block"
                      id="otpBlock2"
                      name="otp2"
                      maxlength="1"
                      required
                    />
                    <input
                      type="text"
                      class="form-control otp-block"
                      id="otpBlock3"
                      name="otp3"
                      maxlength="1"
                      required
                    />
                    <input
                      type="text"
                      class="form-control otp-block"
                      id="otpBlock4"
                      name="otp4"
                      maxlength="1"
                      required
                    />
                    <input
                      type="text"
                      class="form-control otp-block"
                      id="otpBlock5"
                      name="otp5"
                      maxlength="1"
                      required
                    />
                    <input
                      type="text"
                      class="form-control otp-block"
                      id="otpBlock6"
                      name="otp6"
                      maxlength="1"
                      required
                    />
                  </div>

                  <!-- Submit button -->
                  <div
                    class="d-flex justify-content-center align-items-center vh-1"
                  >
                    <button
                      type="submit"
                      class="btn btn-success btn-block mb-4 text-center"
                    >
                      Recover Account
                    </button>
                  </div>

                  <!-- Timer -->
                  <div
                    class="timer-container d-flex justify-content-center align-items-center"
                    id="timer"
                  ></div>

                  <div
                    class="d-flex justify-content-center align-items-center vh-1"
                  >
                    <footer class="text-center">
                      Didnâ€™t receive Confirmation Code?
                      <a href="/resendOTP">Resend Now</a>
                    </footer>
                  </div>

                  <!-- Flash message -->
                  <% if (messages.error) { %>
                  <div
                    class="alert alert-danger text-center"
                    role="alert"
                    style="background-color: #dc3545; color: #ffffff"
                  >
                    <%= messages.error %>
                  </div>
                  <% } %>

                  <!-- Register buttons -->
                </form>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- jQuery -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script>
      $(document).ready(function () {
        // Set the timer duration in seconds
        var timerDuration = 60; // 5 minutes

        // Get the timer element
        var timerElement = $("#timer");

        // Function to update the timer display
        function updateTimerDisplay(timeRemaining) {
          var minutes = Math.floor(timeRemaining / 60);
          var seconds = timeRemaining % 60;
          timerElement.text(
            "Time remaining: " +
              minutes +
              ":" +
              (seconds < 10 ? "0" : "") +
              seconds
          );
        }

        // Function to start the timer
        function startTimer() {
          var timeRemaining = timerDuration;
          updateTimerDisplay(timeRemaining);

          var timerInterval = setInterval(function () {
            timeRemaining--;
            if (timeRemaining <= 0) {
              clearInterval(timerInterval);
              // Optionally, handle expiration here (e.g., display a message or resend OTP)
            } else {
              updateTimerDisplay(timeRemaining);
            }
          }, 1000); // Update the display every second
        }

        // Start the timer when the page loads
        startTimer();

        // Handle keyup and keydown events on OTP input fields
        $('[id^="otpBlock"]').on("keyup keydown", function (event) {
          // Get current block number
          var blockNum = parseInt($(this).attr("id").replace("otpBlock", ""));
          var otpValue = $(this).val().trim();

          // Handle backspace key press
          if (event.which === 8) {
            // If backspace is pressed and the current block is empty,
            // move the focus to the previous block and clear its value
            if (otpValue === "") {
              event.preventDefault(); // Prevent the default backspace behavior
              $("#otpBlock" + (blockNum - 1))
                .removeClass("filled")
                .val("")
                .focus();
            }
          } else {
            // Fill the next block if OTP value is entered and move focus to the next block
            if (otpValue != "") {
              $("#otpBlock" + (blockNum + 1))
                .addClass("filled")
                .focus();
            } else {
              // Clear all blocks if value is removed
              $('[id^="otpBlock"]').removeClass("filled");
            }
          }

          // Automatically submit form if OTP is complete
          if (blockNum === 6 && otpValue != "") {
            $("#otpForm").submit();
          }
        });
      });
    </script>
  </body>
</html>
